<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirror of Memories</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
        }
        
        .font-handwriting {
            font-family: 'Dancing Script', cursive;
        }

        /* Custom Scrollbar (The Slider) */
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #ff69b4, #ff1493);
            border-radius: 10px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #ff1493;
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(1deg); }
        }
        
        .floating-mirror {
            animation: float 4s ease-in-out infinite;
            backdrop-filter: blur(20px);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.1));
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        /* Carousel Styles */
        .carousel-container {
            perspective: 1000px;
            width: 100%;
            max-width: 1000px;
            height: 400px; 
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .carousel-track {
            display: flex;
            transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1);
            gap: 40px; 
            position: absolute;
            left: 50%; /* Center the track */
            /* Initial transform set in JS */
        }
        
        .carousel-item {
            width: 280px; 
            height: 380px; 
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            transition: all 0.5s ease;
            background: #fff;
            border: 4px solid white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            flex-shrink: 0; 
        }
        
        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Inactive items */
        .carousel-item:not(.active) {
            opacity: 0.5;
            transform: scale(0.85);
            filter: blur(2px) grayscale(30%);
        }
        
        /* Active Item */
        .carousel-item.active {
            opacity: 1;
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 20px 40px rgba(255, 105, 180, 0.4);
            border-color: #ff69b4;
        }

        /* Caption Box Style */
        .caption-box {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            transition: opacity 0.5s ease;
        }

        /* Navigation Buttons */
        .nav-btn {
            background: rgba(255, 255, 255, 0.8);
            color: #ff1493;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-btn:hover {
            background: #ff1493;
            color: white;
            transform: scale(1.1);
        }

        .fade-enter {
            animation: fadeIn 0.8s ease forwards;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Background Elements */
        .bg-element {
            position: absolute;
            pointer-events: none;
            z-index: 0;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-100 via-purple-100 to-indigo-200 overflow-hidden relative">

    <div class="absolute inset-0 overflow-hidden">
        <div class="bg-element text-4xl opacity-30 animate-pulse" style="top: 10%; left: 10%">üíñ</div>
        <div class="bg-element text-2xl opacity-30 animate-pulse" style="top: 20%; right: 20%">‚ú®</div>
        <div class="bg-element text-5xl opacity-20" style="bottom: 15%; left: 15%">üå∏</div>
        <div class="bg-element text-3xl opacity-25" style="bottom: 25%; right: 10%">ü¶ã</div>
    </div>

    <div class="relative z-10 flex flex-col items-center justify-center min-h-screen p-4">
        
        <h1 class="text-5xl md:text-7xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-600 mb-6 text-center drop-shadow-sm">
            Mirror of Memories
        </h1>

        <div id="initialMirror" class="floating-mirror w-80 h-80 rounded-full flex flex-col items-center justify-center cursor-pointer hover:scale-105 transition-transform duration-300 group" onclick="unlockMemories()">
            <div class="text-6xl mb-2 group-hover:scale-110 transition-transform">ü™û</div>
            <p class="text-xl font-bold text-pink-600 font-handwriting">Click to Reflect</p>
            <div class="absolute inset-0 rounded-full border-4 border-white opacity-50"></div>
        </div>

        <div id="contentContainer" class="hidden flex-col items-center w-full max-w-4xl">
            
            <div class="carousel-container mb-6">
                <button id="arrowLeft" class="nav-btn absolute left-0 md:-left-12">‚ùÆ</button>
                
                <div class="carousel-track" id="carouselTrack">
                    </div>

                <button id="arrowRight" class="nav-btn absolute right-0 md:-right-12">‚ùØ</button>
            </div>

            <div class="w-full max-w-2xl relative">
                <div class="caption-box rounded-2xl p-6 h-40 md:h-48 w-full">
                    <div class="h-full overflow-y-auto custom-scroll pr-4">
                        <p id="captionText" class="text-lg md:text-xl text-gray-800 leading-relaxed font-medium fade-enter">
                            </p>
                    </div>
                </div>
                <div class="absolute -top-3 -right-3 text-3xl">üíù</div>
            </div>

            <div class="flex gap-4 mt-6">
                <button id="downloadBtn" class="bg-white text-pink-600 px-6 py-3 rounded-full font-bold shadow-lg hover:bg-pink-50 transition-all flex items-center gap-2">
                    ‚¨áÔ∏è Save Photo
                </button>
                <button class="next-page-btn bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:scale-105 transition-transform flex items-center gap-2">
                    Next Page ‚û°Ô∏è
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const memories = [
            { 
                photo: 'pic1.jpg', 
                caption: "That day I don't care coz I have you by my side but today I do as nobody and nothing can ever provide me with the strength and love you did. You are my safe place, my home, and my heart. Every moment without you feels incomplete." 
            },
            { 
                photo: 'pic2.jpg', 
                caption: "Lying beside you and yapping illogical shit that's all my heart crave for!! It's the little moments, the giggles, and the silence we share that mean the world to me." 
            },
            { 
                photo: 'pic3.png', 
                caption: "Remember when puchu left before my last birthday and you brought a new one to console and cheer me up? This birthday I have lost something more and most precious, please bring her back (this time the original one). I miss you more than words can say." 
            },
            { 
                photo: 'pic4.png', 
                caption: "This heart was unintentionally given but like always with you, everything has a meaning. You turn accidents into destiny and simple moments into core memories." 
            },
            { 
                photo: 'pic5.png', 
                caption: "My forever favourite irrespective of distance, time and issues. No matter where life takes us, you will always be the one my soul searches for in a crowded room." 
            }
        ];

        // --- VARIABLES ---
        let currentIndex = 0;
        let unlocked = false;
        const track = document.getElementById('carouselTrack');
        const captionText = document.getElementById('captionText');

        // --- FUNCTIONS ---

        // 1. Unlock the Mirror
        function unlockMemories() {
            if (unlocked) return;
            unlocked = true;

            const mirror = document.getElementById('initialMirror');
            const content = document.getElementById('contentContainer');

            // Animate Mirror Out
            mirror.style.transform = "scale(0) rotate(180deg)";
            mirror.style.opacity = "0";

            setTimeout(() => {
                mirror.classList.add('hidden');
                content.classList.remove('hidden');
                content.classList.add('fade-enter'); // Fade in content
                renderCarousel();
                updateView();
            }, 500);
        }

        // 2. Render Carousel Items
        function renderCarousel() {
            track.innerHTML = '';
            memories.forEach((memory, index) => {
                const item = document.createElement('div');
                item.className = `carousel-item ${index === 0 ? 'active' : ''}`;
                item.onclick = () => goToSlide(index);
                
                const img = document.createElement('img');
                img.src = memory.photo;
                img.alt = "Memory";
                
                item.appendChild(img);
                track.appendChild(item);
            });
        }

        // 3. Update Carousel & Text Position
        function updateView() {
            const items = document.querySelectorAll('.carousel-item');
            items.forEach((item, i) => {
                item.classList.toggle('active', i === currentIndex);
            });

            // Centering Logic
            // Item width (280) + Gap (40) = 320px per unit
            // To center Item[i]: We shift left by (i * 320). 
            // Then we adjust right by (140px) because track is centered at 50%.
            track.style.left = `calc(50% - 140px - ${currentIndex * 320}px)`;
            
            // Update Text with Fade Animation
            captionText.classList.remove('fade-enter');
            void captionText.offsetWidth; // Trigger reflow to restart animation
            captionText.textContent = memories[currentIndex].caption;
            captionText.classList.add('fade-enter');
        }

        function goToSlide(index) {
            currentIndex = index;
            updateView();
        }

        // 4. Event Listeners
        document.getElementById('arrowLeft').addEventListener('click', () => {
            if (currentIndex > 0) goToSlide(currentIndex - 1);
            else goToSlide(memories.length - 1); // Loop
        });

        document.getElementById('arrowRight').addEventListener('click', () => {
            if (currentIndex < memories.length - 1) goToSlide(currentIndex + 1);
            else goToSlide(0); // Loop
        });

        document.getElementById('downloadBtn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.href = memories[currentIndex].photo;
            link.download = `memory-${currentIndex + 1}.jpg`;
            link.click();
        });

        document.querySelector('.next-page-btn').addEventListener('click', () => {
            document.body.style.transition = "opacity 1s";
            document.body.style.opacity = "0";
            setTimeout(() => {
                window.location.href = "cake.html";
            }, 1000);
        });

    </script>
</body>
</html>
